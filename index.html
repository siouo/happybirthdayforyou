<!DOCTYPE html>
<html lang="zh-Hant">

<head>
    <meta charset="UTF-8">
    <title>Surprise</title>
    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            background-color: black;
            height: 100%;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
        }

        #explosionCanvas {
            position: absolute;
            top: 0;
            left: 0;
            z-index: 0;
        }

        #btnWrapper {
            z-index: 1;
        }

        #boomBtn {
            background: none;
            border: none;
            cursor: pointer;
        }

        #boomBtn img {
            width: 150px;
            height: auto;
        }

        #countdown {
            font-size: 80px;
            color: white;
            display: none;
            z-index: 2;
            position: absolute;
        }
    </style>
</head>

<body>

    <canvas id="explosionCanvas"></canvas>

    <div id="btnWrapper">
        <button id="boomBtn">
            <img src="https://cdn-icons-png.flaticon.com/512/595/595067.png" alt="按鈕圖片">
            <!-- 換成你想要的圖片網址也可以 -->
        </button>
    </div>

    <div id="countdown">5</div>

    <script>
        const canvas = document.getElementById("explosionCanvas");
        const ctx = canvas.getContext("2d");
        let w, h;

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
        }
        window.addEventListener("resize", resize);
        resize();

        const particles = [];

        function createExplosion(x, y) {
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x, y,
                    vx: Math.cos(i) * (Math.random() * 4 + 1),
                    vy: Math.sin(i) * (Math.random() * 4 + 1),
                    life: 60,
                    color: `hsl(${Math.random() * 360}, 100%, 60%)`
                });
            }
        }

        function animateExplosion() {
            ctx.clearRect(0, 0, w, h);
            for (let i = particles.length - 1; i >= 0; i--) {
                const p = particles[i];
                p.x += p.vx;
                p.y += p.vy;
                p.life--;
                if (p.life <= 0) {
                    particles.splice(i, 1);
                    continue;
                }
                ctx.beginPath();
                ctx.fillStyle = p.color;
                ctx.arc(p.x, p.y, 3, 0, Math.PI * 2);
                ctx.fill();
            }
            if (particles.length > 0) {
                requestAnimationFrame(animateExplosion);
            }
        }

        const boomBtn = document.getElementById("boomBtn");
        const countdown = document.getElementById("countdown");

        boomBtn.addEventListener("click", () => {
            const rect = boomBtn.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const centerY = rect.top + rect.height / 2;

            createExplosion(centerX, centerY);
            animateExplosion();

            boomBtn.style.display = "none";

            let count = 5;
            countdown.textContent = count;
            countdown.style.display = "block";

            const centerScreenX = window.innerWidth / 2;
            const centerScreenY = window.innerHeight / 2;

            const interval = setInterval(() => {
                createExplosion(centerScreenX, centerScreenY);
                animateExplosion();

                count--;
                if (count > 0) {
                    countdown.textContent = count;
                } else {
                    clearInterval(interval);
                    countdown.textContent = "Happy Birthday for you";
                }
            }, 1000);
        });

        let count = 5;
        if (count > 0) {
            countdown.textContent = count;
        } else {
            clearInterval(interval);
            countdown.textContent = "BOOM!";

            // 等 1 秒後跳轉
            setTimeout(() => {
                window.location.href = "../1/index.html";
            }, 3000);
        }

    </script>

</body>

</html>